"use strict";exports.id=826,exports.ids=[826],exports.modules={2502:(__unused_webpack_module,exports)=>{Object.defineProperty(exports,"__esModule",{value:!0})},8128:function(__unused_webpack_module,exports,__webpack_require__){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(2502),exports),__exportStar(__webpack_require__(6903),exports),__exportStar(__webpack_require__(2041),exports)},6903:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RequestLightClient=void 0;const guards_1=__webpack_require__(6202),clients_1=__webpack_require__(6502),defaultHeaders={"user-agent":"vscode-versionlens (gitlab.com/versionlens/vscode-versionlens)"};exports.RequestLightClient=class{xhr;options;logger;constructor(xhr,options,logger){this.xhr=xhr,this.options=options,this.logger=logger,(0,guards_1.throwUndefinedOrNull)("xhr",xhr),(0,guards_1.throwUndefinedOrNull)("options",options),(0,guards_1.throwUndefinedOrNull)("logger",logger)}async request(method,baseUrl,query={},headers={}){const url=clients_1.UrlUtils.createUrl(baseUrl,query);try{const response=await this.xhr({url,type:method,headers:Object.assign({},headers,defaultHeaders),strictSSL:this.options.http.strictSSL});return{source:clients_1.ClientResponseSource.remote,status:response.status,data:response.responseText,rejected:!1}}catch(error){const errorResponse=error;throw{source:clients_1.ClientResponseSource.remote,status:errorResponse.status,data:errorResponse.responseText,rejected:!0}}}}},2041:function(__unused_webpack_module,exports,__webpack_require__){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(o,v){Object.defineProperty(o,"default",{enumerable:!0,value:v})}:function(o,v){o.default=v}),__importStar=this&&this.__importStar||function(mod){if(mod&&mod.__esModule)return mod;var result={};if(null!=mod)for(var k in mod)"default"!==k&&Object.prototype.hasOwnProperty.call(mod,k)&&__createBinding(result,mod,k);return __setModuleDefault(result,mod),result};Object.defineProperty(exports,"__esModule",{value:!0}),exports.createJsonClient=exports.createHttpClient=void 0;const clients_1=__webpack_require__(6502),RequireLight=__importStar(__webpack_require__(6283)),requestLightClient_1=__webpack_require__(6903);function createHttpClient(options,logger){return new requestLightClient_1.RequestLightClient(RequireLight.xhr,options,logger)}exports.createHttpClient=createHttpClient,exports.createJsonClient=function(options,logger){return new clients_1.JsonHttpClient(createHttpClient(options,logger))}},7826:function(__unused_webpack_module,exports,__webpack_require__){var __createBinding=this&&this.__createBinding||(Object.create?function(o,m,k,k2){void 0===k2&&(k2=k);var desc=Object.getOwnPropertyDescriptor(m,k);desc&&!("get"in desc?!m.__esModule:desc.writable||desc.configurable)||(desc={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(o,k2,desc)}:function(o,m,k,k2){void 0===k2&&(k2=k),o[k2]=m[k]}),__exportStar=this&&this.__exportStar||function(m,exports){for(var p in m)"default"===p||Object.prototype.hasOwnProperty.call(exports,p)||__createBinding(exports,m,p)};Object.defineProperty(exports,"__esModule",{value:!0}),__exportStar(__webpack_require__(4302),exports),__exportStar(__webpack_require__(4352),exports),__exportStar(__webpack_require__(965),exports),__exportStar(__webpack_require__(412),exports)},4302:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CargoConfig=void 0;const guards_1=__webpack_require__(6202),clients_1=__webpack_require__(6502),utils_1=__webpack_require__(7130),eCargoContributions_1=__webpack_require__(6348),ctorParam=(0,utils_1.nameOf)();exports.CargoConfig=class{config;caching;http;constructor(config,caching,http){this.config=config,this.caching=caching,this.http=http,(0,guards_1.throwUndefinedOrNull)(ctorParam.config,config),(0,guards_1.throwUndefinedOrNull)(ctorParam.caching,caching),(0,guards_1.throwUndefinedOrNull)(ctorParam.http,http)}get fileMatcher(){return{language:"toml",scheme:"file",pattern:this.filePatterns,exclude:""}}get filePatterns(){return this.config.get(eCargoContributions_1.CargoContributions.FilePatterns)}get dependencyProperties(){return this.config.get(eCargoContributions_1.CargoContributions.DependencyProperties)}get prereleaseTagFilter(){return this.config.get(eCargoContributions_1.CargoContributions.PrereleaseTagFilter)}get apiUrl(){return clients_1.UrlUtils.ensureEndSlash(this.config.get(eCargoContributions_1.CargoContributions.ApiUrl))}get onSaveChangesTask(){return this.config.get(eCargoContributions_1.CargoContributions.OnSaveChangesTask)}}},4352:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.configureContainer=void 0;const serviceUtils_1=__webpack_require__(7184);exports.configureContainer=async function(serviceProvider,services){return(0,serviceUtils_1.addCachingOptions)(services),(0,serviceUtils_1.addHttpOptions)(services),(0,serviceUtils_1.addCargoConfig)(services),(0,serviceUtils_1.addJsonClient)(services),(0,serviceUtils_1.addCratesClient)(services),(0,serviceUtils_1.addSuggestionProvider)(services),await services.buildChild("cargo",serviceProvider)}},965:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CargoSuggestionProvider=void 0;const guards_1=__webpack_require__(6202),packages_1=__webpack_require__(7074);exports.CargoSuggestionProvider=class{client;config;logger;name="cargo";constructor(client,config,logger){this.client=client,this.config=config,this.logger=logger,(0,guards_1.throwUndefinedOrNull)("client",client),(0,guards_1.throwUndefinedOrNull)("config",config),(0,guards_1.throwUndefinedOrNull)("logger",logger)}parseDependencies(packagePath,packageText){const options={includePropNames:this.config.dependencyProperties},parsedPackages=(0,packages_1.parsePackagesToml)(packageText,options),packageDependencies=[];for(const packageDesc of parsedPackages){const nameDesc=packageDesc.getType(packages_1.PackageDescriptorType.name);if(packageDesc.hasType(packages_1.PackageDescriptorType.version)){const versionDesc=packageDesc.getType(packages_1.PackageDescriptorType.version);packageDependencies.push(new packages_1.PackageDependency((0,packages_1.createPackageResource)(nameDesc.name,versionDesc.version,packagePath),nameDesc.nameRange,versionDesc.versionRange,packageDesc))}else if(packageDesc.hasType(packages_1.PackageDescriptorType.path)){const pathType=packageDesc.getType(packages_1.PackageDescriptorType.path);packageDependencies.push(new packages_1.PackageDependency((0,packages_1.createPackageResource)(nameDesc.name,pathType.path,packagePath),nameDesc.nameRange,pathType.pathRange,packageDesc))}else if(packageDesc.hasType(packages_1.PackageDescriptorType.git)){const gitType=packageDesc.getType(packages_1.PackageDescriptorType.git);packageDependencies.push(new packages_1.PackageDependency((0,packages_1.createPackageResource)(nameDesc.name,gitType.gitUrl,packagePath),nameDesc.nameRange,nameDesc.nameRange,packageDesc))}else;}return packageDependencies}}},412:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.CratesClient=void 0;const guards_1=__webpack_require__(6202),clients_1=__webpack_require__(6502),packages_1=__webpack_require__(7074);exports.CratesClient=class{config;jsonClient;logger;constructor(config,jsonClient,logger){this.config=config,this.jsonClient=jsonClient,this.logger=logger,(0,guards_1.throwUndefinedOrNull)("config",config),(0,guards_1.throwUndefinedOrNull)("jsonClient",jsonClient),(0,guards_1.throwUndefinedOrNull)("logger",logger)}async fetchPackage(request){const requestedPackage=request.dependency.package,pathDesc=request.dependency.packageDesc.getType(packages_1.PackageDescriptorType.path);if(pathDesc)return packages_1.ClientResponseFactory.createDirectory(requestedPackage.name,requestedPackage.path,pathDesc.path);if(request.dependency.packageDesc.getType(packages_1.PackageDescriptorType.git))return packages_1.ClientResponseFactory.createGit();const semverSpec=packages_1.VersionUtils.parseSemver(requestedPackage.version),url=`${this.config.apiUrl}${requestedPackage.name}/versions`;try{return await this.createRemotePackageDocument(url,request,semverSpec)}catch(error){const errorResponse=error;this.logger.debug("Caught exception from %s: %O",packages_1.PackageSourceType.Registry,errorResponse);const suggestion=packages_1.SuggestionFactory.createFromHttpStatus(errorResponse.status);if(null!=suggestion)return packages_1.ClientResponseFactory.create(packages_1.PackageSourceType.Registry,errorResponse,[suggestion]);throw errorResponse}}async createRemotePackageDocument(url,request,semverSpec){const httpResponse=await this.jsonClient.request(clients_1.HttpClientRequestMethods.get,url,{},{}),requestPackage=request.dependency.package,versionRange=semverSpec.rawVersion,resolved={name:requestPackage.name,version:versionRange},responseStatus={source:httpResponse.source,status:httpResponse.status};let rawVersions=httpResponse.data.versions.reverse().map((p=>p.num));const semverVersions=packages_1.VersionUtils.filterSemverVersions(rawVersions),{releases,prereleases}=packages_1.VersionUtils.splitReleasesFromArray(semverVersions,this.config.prereleaseTagFilter),suggestions=(0,packages_1.createSuggestions)(versionRange,releases,prereleases);return{source:packages_1.PackageSourceType.Registry,responseStatus,type:semverSpec.type,resolved,suggestions}}}},6348:(__unused_webpack_module,exports)=>{var CargoContributions;Object.defineProperty(exports,"__esModule",{value:!0}),exports.CargoContributions=void 0,function(CargoContributions){CargoContributions.Caching="cargo.caching",CargoContributions.Http="cargo.http",CargoContributions.DependencyProperties="cargo.dependencyProperties",CargoContributions.ApiUrl="cargo.apiUrl",CargoContributions.FilePatterns="cargo.files",CargoContributions.OnSaveChangesTask="cargo.onSaveChanges",CargoContributions.PrereleaseTagFilter="cargo.prereleaseTagFilter"}(CargoContributions||(exports.CargoContributions=CargoContributions={}))},7184:(__unused_webpack_module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.addSuggestionProvider=exports.addCratesClient=exports.addJsonClient=exports.addCargoConfig=exports.addHttpOptions=exports.addCachingOptions=void 0;const caching_1=__webpack_require__(2304),http_1=__webpack_require__(5829),utils_1=__webpack_require__(7130),http_2=__webpack_require__(8128),cargoConfig_1=__webpack_require__(4302),cargoSuggestionProvider_1=__webpack_require__(965),cratesClient_1=__webpack_require__(412),eCargoContributions_1=__webpack_require__(6348);exports.addCachingOptions=function(services){services.addSingleton((0,utils_1.nameOf)().cargoCachingOpts,(container=>new caching_1.CachingOptions(container.appConfig,eCargoContributions_1.CargoContributions.Caching,"caching")))},exports.addHttpOptions=function(services){services.addSingleton((0,utils_1.nameOf)().cargoHttpOpts,(container=>new http_1.HttpOptions(container.appConfig,eCargoContributions_1.CargoContributions.Http,"http")))},exports.addCargoConfig=function(services){services.addSingleton((0,utils_1.nameOf)().cargoConfig,(container=>new cargoConfig_1.CargoConfig(container.appConfig,container.cargoCachingOpts,container.cargoHttpOpts)))},exports.addJsonClient=function(services){const serviceName=(0,utils_1.nameOf)().cargoJsonClient;services.addSingleton(serviceName,(container=>(0,http_2.createJsonClient)({caching:container.cargoCachingOpts,http:container.cargoHttpOpts},container.logger.child({namespace:serviceName}))))},exports.addCratesClient=function(services){const serviceName=(0,utils_1.nameOf)().cratesClient;services.addSingleton(serviceName,(container=>new cratesClient_1.CratesClient(container.cargoConfig,container.cargoJsonClient,container.logger.child({namespace:serviceName}))))},exports.addSuggestionProvider=function(services){services.addScoped((0,utils_1.nameOf)().suggestionProvider,(container=>new cargoSuggestionProvider_1.CargoSuggestionProvider(container.cratesClient,container.cargoConfig,container.logger.child({namespace:"cargoSuggestionProvider"}))))}}};
//# sourceMappingURL=826.bundle.js.map